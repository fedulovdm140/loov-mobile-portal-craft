
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ LoovIS –≤ Telegram Mini App

## –û–±–∑–æ—Ä

LoovIS –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ Telegram Mini App, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∞–ª–æ–Ω–æ–º –æ–ø—Ç–∏–∫–∏ –ø—Ä—è–º–æ –∏–∑ Telegram.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot

1. **–ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram:**
   ```
   /start
   /newbot
   ```

2. **–£–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –±–æ—Ç–∞:**
   - –ò–º—è: `LoovIS Bot`
   - Username: `loovis_bot` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º)

3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é:**
   ```
   /setmenubutton
   @loovis_bot
   ```
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏: `–û—Ç–∫—Ä—ã—Ç—å LoovIS`
   - URL: `https://your-domain.com`

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞:**
   ```
   /setdescription
   @loovis_bot
   LoovIS - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∞–ª–æ–Ω–æ–º –æ–ø—Ç–∏–∫–∏. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –ø—Ä—è–º–æ –∏–∑ Telegram.
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:**
   ```
   /setcommands
   @loovis_bot
   start - –ó–∞–ø—É—Å—Ç–∏—Ç—å LoovIS
   help - –ü–æ–º–æ—â—å
   dashboard - –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥
   clients - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
   orders - –ó–∞–∫–∞–∑—ã
   ```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Lovable

1. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```env
   VITE_FRAPPE_URL=https://your-frappe-site.com
   VITE_FRAPPE_API_KEY=your-api-key
   VITE_FRAPPE_API_SECRET=your-api-secret
   VITE_TELEGRAM_BOT_TOKEN=your-bot-token
   VITE_IS_TELEGRAM_MINI_APP=true
   ```

2. **–û–ø—É–±–ª–∏–∫—É–π—Ç–µ —á–µ—Ä–µ–∑ Lovable:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Publish" –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ Lovable
   - –ü–æ–ª—É—á–∏—Ç–µ URL —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–æ—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   npm run build
   ```

2. **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ:**
   - Vercel: `vercel --prod`
   - Netlify: –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `dist`
   - VPS: —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ `dist` –Ω–∞ —Å–µ—Ä–≤–µ—Ä

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Telegram Mini App)

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å—å `initData`:

```python
# –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (Python)
import hashlib
import hmac
from urllib.parse import unquote, parse_qsl

def validate_telegram_data(init_data: str, bot_token: str) -> bool:
    parsed_data = dict(parse_qsl(unquote(init_data)))
    
    if 'hash' not in parsed_data:
        return False
    
    received_hash = parsed_data.pop('hash')
    
    # –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    data_check_string = '\n'.join([f"{k}={v}" for k, v in sorted(parsed_data.items())])
    
    # –í—ã—á–∏—Å–ª—è–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
    secret_key = hmac.new(
        "WebAppData".encode(),
        bot_token.encode(),
        hashlib.sha256
    ).digest()
    
    # –í—ã—á–∏—Å–ª—è–µ–º —Ö–µ—à
    calculated_hash = hmac.new(
        secret_key,
        data_check_string.encode(),
        hashlib.sha256
    ).hexdigest()
    
    return calculated_hash == received_hash
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

```javascript
// –î–ª—è Express.js —Å–µ—Ä–≤–µ—Ä–∞
app.use(cors({
  origin: [
    'https://web.telegram.org',
    'https://your-domain.com'
  ],
  credentials: true
}));
```

### 5. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UX –¥–ª—è Telegram

#### –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–º—É Telegram:**
   ```css
   .telegram-mini-app {
     --background: var(--tg-theme-bg-color, #ffffff);
     --foreground: var(--tg-theme-text-color, #000000);
     --muted: var(--tg-theme-hint-color, #707579);
     --accent: var(--tg-theme-link-color, #2481cc);
   }
   ```

2. **–ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `BackButton` –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `MainButton` –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### –¢–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

```typescript
// –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è haptic feedback
const handleSuccess = () => {
  hapticFeedback('notification', 'success');
};

const handleError = () => {
  hapticFeedback('notification', 'error');
};

const handleButtonClick = () => {
  hapticFeedback('impact', 'medium');
};
```

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

#### –°–æ–∑–¥–∞–Ω–∏–µ webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```python
# –ü—Ä–∏–º–µ—Ä webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö
from telegram import Bot

bot = Bot(token=BOT_TOKEN)

async def notify_order_status(user_id: int, order_id: str, status: str):
    message = f"üîî –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ #{order_id} –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: {status}"
    
    keyboard = [
        [{"text": "–û—Ç–∫—Ä—ã—Ç—å –∑–∞–∫–∞–∑", "web_app": {"url": f"https://your-domain.com/orders/{order_id}"}}]
    ]
    
    await bot.send_message(
        chat_id=user_id,
        text=message,
        reply_markup={"inline_keyboard": keyboard}
    )
```

#### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

```python
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
from telegram.ext import Application, CommandHandler, MessageHandler, filters

async def start_command(update, context):
    keyboard = [
        [{"text": "üöÄ –û—Ç–∫—Ä—ã—Ç—å LoovIS", "web_app": {"url": "https://your-domain.com"}}]
    ]
    
    await update.message.reply_text(
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ LoovIS! üëã\n\n"
        "–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º —Å–∞–ª–æ–Ω–æ–º –æ–ø—Ç–∏–∫–∏ –ø—Ä—è–º–æ –∏–∑ Telegram.",
        reply_markup={"keyboard": keyboard, "resize_keyboard": True}
    )

async def dashboard_command(update, context):
    keyboard = [
        [{"text": "üìä –î–∞—à–±–æ—Ä–¥", "web_app": {"url": "https://your-domain.com/dashboard"}}]
    ]
    
    await update.message.reply_text(
        "–û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫:",
        reply_markup={"inline_keyboard": keyboard}
    )

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
app = Application.builder().token(BOT_TOKEN).build()
app.add_handler(CommandHandler("start", start_command))
app.add_handler(CommandHandler("dashboard", dashboard_command))
```

### 7. –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram

1. **–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`**
3. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å LoovIS"**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏**

#### –û—Ç–ª–∞–¥–∫–∞

```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
console.log('Telegram WebApp Data:', window.Telegram?.WebApp);
console.log('User Data:', telegramService.getUserData());
console.log('Theme Params:', telegramService.getThemeParams());
```

### 8. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          telegram: ['@/lib/telegram', '@/hooks/useTelegram']
        }
      }
    }
  }
});
```

#### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// Service Worker –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
self.addEventListener('fetch', (event) => {
  if (event.request.url.includes('/api/')) {
    return; // –ù–µ –∫–µ—à–∏—Ä—É–µ–º API –∑–∞–ø—Ä–æ—Å—ã
  }
  
  event.respondWith(
    caches.match(event.request).then((response) => {
      return response || fetch(event.request);
    })
  );
});
```

### 9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```typescript
// –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è Telegram Mini App
const trackTelegramEvent = (event: string, data?: any) => {
  if (telegramService.isInTelegram()) {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ –≤–∞—à—É –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É
    analytics.track(`telegram_${event}`, {
      user_id: telegramService.getUserData()?.id,
      platform: 'telegram_mini_app',
      ...data
    });
  }
};
```

### 10. Checklist —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Telegram Bot
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω Menu Button —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º URL
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ —Å HTTPS
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [Telegram WebApp API](https://core.telegram.org/bots/webapps#initializing-mini-apps)
- [BotFather Commands](https://core.telegram.org/bots#botfather)

